"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sendProgressUpdate = exports.handler = void 0;
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const lib_dynamodb_1 = require("@aws-sdk/lib-dynamodb");
const dynamoClient = new client_dynamodb_1.DynamoDBClient({ region: process.env.AWS_REGION || 'us-east-1' });
const docClient = lib_dynamodb_1.DynamoDBDocumentClient.from(dynamoClient);
// Table to store WebSocket connections
const CONNECTIONS_TABLE = process.env.CONNECTIONS_TABLE || 'lensy-websocket-connections';
const handler = async (event) => {
    console.log('WebSocket event:', JSON.stringify(event, null, 2));
    const { connectionId, routeKey, domainName, stage } = event.requestContext;
    try {
        switch (routeKey) {
            case '$connect':
                return await handleConnect(connectionId);
            case '$disconnect':
                return await handleDisconnect(connectionId);
            case 'subscribe':
                return await handleSubscribe(connectionId, event.body);
            default:
                console.log('Unknown route:', routeKey);
                return { statusCode: 400, body: 'Unknown route' };
        }
    }
    catch (error) {
        console.error('WebSocket handler error:', error);
        return {
            statusCode: 500,
            body: JSON.stringify({
                error: 'Internal server error',
                message: error instanceof Error ? error.message : 'Unknown error'
            })
        };
    }
};
exports.handler = handler;
async function handleConnect(connectionId) {
    console.log('Client connected:', connectionId);
    // Store connection in DynamoDB
    await docClient.send(new lib_dynamodb_1.PutCommand({
        TableName: CONNECTIONS_TABLE,
        Item: {
            connectionId,
            connectedAt: Date.now(),
            ttl: Math.floor(Date.now() / 1000) + 3600 // 1 hour TTL
        }
    }));
    return { statusCode: 200, body: 'Connected' };
}
async function handleDisconnect(connectionId) {
    console.log('Client disconnected:', connectionId);
    // Remove connection from DynamoDB
    await docClient.send(new lib_dynamodb_1.DeleteCommand({
        TableName: CONNECTIONS_TABLE,
        Key: { connectionId }
    }));
    return { statusCode: 200, body: 'Disconnected' };
}
async function handleSubscribe(connectionId, body) {
    if (!body) {
        return { statusCode: 400, body: 'Missing body' };
    }
    const { sessionId } = JSON.parse(body);
    if (!sessionId) {
        return { statusCode: 400, body: 'Missing sessionId' };
    }
    console.log(`Subscribing connection ${connectionId} to session ${sessionId}`);
    // Update connection with sessionId
    await docClient.send(new lib_dynamodb_1.PutCommand({
        TableName: CONNECTIONS_TABLE,
        Item: {
            connectionId,
            sessionId,
            connectedAt: Date.now(),
            ttl: Math.floor(Date.now() / 1000) + 3600
        }
    }));
    return { statusCode: 200, body: 'Subscribed' };
}
// Helper function to send progress updates (called by other Lambdas)
async function sendProgressUpdate(sessionId, message, type, metadata) {
    // This function will be imported and used by other Lambda functions
    // to send progress updates to connected WebSocket clients
    console.log(`Progress update for session ${sessionId}:`, message);
    // Implementation will query DynamoDB for connections with this sessionId
    // and send the message to each connection via API Gateway Management API
}
exports.sendProgressUpdate = sendProgressUpdate;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSw4REFBMEQ7QUFDMUQsd0RBQXNHO0FBR3RHLE1BQU0sWUFBWSxHQUFHLElBQUksZ0NBQWMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxXQUFXLEVBQUUsQ0FBQyxDQUFDO0FBQzNGLE1BQU0sU0FBUyxHQUFHLHFDQUFzQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUU1RCx1Q0FBdUM7QUFDdkMsTUFBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixJQUFJLDZCQUE2QixDQUFDO0FBWWxGLE1BQU0sT0FBTyxHQUFpQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUU7SUFDakUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVoRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQztJQUUzRSxJQUFJO1FBQ0EsUUFBUSxRQUFRLEVBQUU7WUFDZCxLQUFLLFVBQVU7Z0JBQ1gsT0FBTyxNQUFNLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUM3QyxLQUFLLGFBQWE7Z0JBQ2QsT0FBTyxNQUFNLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ2hELEtBQUssV0FBVztnQkFDWixPQUFPLE1BQU0sZUFBZSxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDM0Q7Z0JBQ0ksT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDeEMsT0FBTyxFQUFFLFVBQVUsRUFBRSxHQUFH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ZSxFQUNmLElBQStDLEVBQy9DLFFBQThCO0lBRTlCLG9FQUFvRTtJQUNwRSwwREFBMEQ7SUFDMUQsT0FBTyxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsU0FBUyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFbEUseUVBQXlFO0lBQ3pFLHlFQUF5RTtBQUM3RSxDQUFDO0FBWkQsZ0RBWUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIYW5kbGVyIH0gZnJvbSAnYXdzLWxhbWJkYSc7XG5pbXBvcnQgeyBEeW5hbW9EQkNsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYic7XG5pbXBvcnQgeyBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LCBQdXRDb21tYW5kLCBEZWxldGVDb21tYW5kLCBHZXRDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvbGliLWR5bmFtb2RiJztcbmltcG9ydCB7IEFwaUdhdGV3YXlNYW5hZ2VtZW50QXBpQ2xpZW50LCBQb3N0VG9Db25uZWN0aW9uQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1hcGlnYXRld2F5bWFuYWdlbWVudGFwaSc7XG5cbmNvbnN0IGR5bmFtb0NsaWVudCA9IG5ldyBEeW5hbW9EQkNsaWVudCh7IHJlZ2lvbjogcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTiB8fCAndXMtZWFzdC0xJyB9KTtcbmNvbnN0IGRvY0NsaWVudCA9IER5bmFtb0RCRG9jdW1lbnRDbGllbnQuZnJvbShkeW5hbW9DbGllbnQpO1xuXG4vLyBUYWJsZSB0byBzdG9yZSBXZWJTb2NrZXQgY29ubmVjdGlvbnNcbmNvbnN0IENPTk5FQ1RJT05TX1RBQkxFID0gcHJvY2Vzcy5lbnYuQ09OTkVDVElPTlNfVEFCTEUgfHwgJ2xlbnN5LXdlYnNvY2tldC1jb25uZWN0aW9ucyc7XG5cbmludGVyZmFjZSBXZWJTb2NrZXRFdmVudCB7XG4gICAgcmVxdWVzdENvbnRleHQ6IHtcbiAgICAgICAgY29ubmVjdGlvbklkOiBzdHJpbmc7XG4gICAgICAgIHJvdXRlS2V5OiBzdHJpbmc7XG4gICAgICAgIGRvbWFpbk5hbWU6IHN0cmluZztcbiAgICAgICAgc3RhZ2U6IHN0cmluZztcbiAgICB9O1xuICAgIGJvZHk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVyOiBIYW5kbGVyPFdlYlNvY2tldEV2ZW50LCBhbnk+ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBldmVudDonLCBKU09OLnN0cmluZ2lmeShldmVudCwgbnVsbCwgMikpO1xuXG4gICAgY29uc3QgeyBjb25uZWN0aW9uSWQsIHJvdXRlS2V5LCBkb21haW5OYW1lLCBzdGFnZSB9ID0gZXZlbnQucmVxdWVzdENvbnRleHQ7XG5cbiAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKHJvdXRlS2V5KSB7XG4gICAgICAgICAgICBjYXNlICckY29ubmVjdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZUNvbm5lY3QoY29ubmVjdGlvbklkKTtcbiAgICAgICAgICAgIGNhc2UgJyRkaXNjb25uZWN0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlRGlzY29ubmVjdChjb25uZWN0aW9uSWQpO1xuICAgICAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlU3Vic2NyaWJlKGNvbm5lY3Rpb25JZCwgZXZlbnQuYm9keSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVbmtub3duIHJvdXRlOicsIHJvdXRlS2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXNDb2RlOiA0MDAsIGJvZHk6ICdVbmtub3duIHJvdXRlJyB9O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGhhbmRsZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzQ29kZTogNTAwLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICB9XG59O1xuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVDb25uZWN0KGNvbm5lY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zb2xlLmxvZygnQ2xpZW50IGNvbm5lY3RlZDonLCBjb25uZWN0aW9uSWQpO1xuXG4gICAgLy8gU3RvcmUgY29ubmVjdGlvbiBpbiBEeW5hbW9EQlxuICAgIGF3YWl0IGRvY0NsaWVudC5zZW5kKG5ldyBQdXRDb21tYW5kKHtcbiAgICAgICAgVGFibGVOYW1lOiBDT05ORUNUSU9OU19UQUJMRSxcbiAgICAgICAgSXRlbToge1xuICAgICAgICAgICAgY29ubmVjdGlvbklkLFxuICAgICAgICAgICAgY29ubmVjdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgICB0dGw6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgMzYwMCAvLyAxIGhvdXIgVFRMXG4gICAgICAgIH1cbiAgICB9KSk7XG5cbiAgICByZXR1cm4geyBzdGF0dXNDb2RlOiAyMDAsIGJvZHk6ICdDb25uZWN0ZWQnIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZURpc2Nvbm5lY3QoY29ubmVjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnNvbGUubG9nKCdDbGllbnQgZGlzY29ubmVjdGVkOicsIGNvbm5lY3Rpb25JZCk7XG5cbiAgICAvLyBSZW1vdmUgY29ubmVjdGlvbiBmcm9tIER5bmFtb0RCXG4gICAgYXdhaXQgZG9jQ2xpZW50LnNlbmQobmV3IERlbGV0ZUNvbW1hbmQoe1xuICAgICAgICBUYWJsZU5hbWU6IENPTk5FQ1RJT05TX1RBQkxFLFxuICAgICAgICBLZXk6IHsgY29ubmVjdGlvbklkIH1cbiAgICB9KSk7XG5cbiAgICByZXR1cm4geyBzdGF0dXNDb2RlOiAyMDAsIGJvZHk6ICdEaXNjb25uZWN0ZWQnIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1YnNjcmliZShjb25uZWN0aW9uSWQ6IHN0cmluZywgYm9keT86IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKCFib2R5KSB7XG4gICAgICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDQwMCwgYm9keTogJ01pc3NpbmcgYm9keScgfTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNlc3Npb25JZCB9ID0gSlNPTi5wYXJzZShib2R5KTtcblxuICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDQwMCwgYm9keTogJ01pc3Npbmcgc2Vzc2lvbklkJyB9O1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBTdWJzY3JpYmluZyBjb25uZWN0aW9uICR7Y29ubmVjdGlvbklkfSB0byBzZXNzaW9uICR7c2Vzc2lvbklkfWApO1xuXG4gICAgLy8gVXBkYXRlIGNvbm5lY3Rpb24gd2l0aCBzZXNzaW9uSWRcbiAgICBhd2FpdCBkb2NDbGllbnQuc2VuZChuZXcgUHV0Q29tbWFuZCh7XG4gICAgICAgIFRhYmxlTmFtZTogQ09OTkVDVElPTlNfVEFCTEUsXG4gICAgICAgIEl0ZW06IHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgIGNvbm5lY3RlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgdHRsOiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSArIDM2MDBcbiAgICAgICAgfVxuICAgIH0pKTtcblxuICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDIwMCwgYm9keTogJ1N1YnNjcmliZWQnIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBzZW5kIHByb2dyZXNzIHVwZGF0ZXMgKGNhbGxlZCBieSBvdGhlciBMYW1iZGFzKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRQcm9ncmVzc1VwZGF0ZShcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgdHlwZTogJ2luZm8nIHwgJ3N1Y2Nlc3MnIHwgJ2Vycm9yJyB8ICdwcm9ncmVzcycsXG4gICAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4pIHtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgaW1wb3J0ZWQgYW5kIHVzZWQgYnkgb3RoZXIgTGFtYmRhIGZ1bmN0aW9uc1xuICAgIC8vIHRvIHNlbmQgcHJvZ3Jlc3MgdXBkYXRlcyB0byBjb25uZWN0ZWQgV2ViU29ja2V0IGNsaWVudHNcbiAgICBjb25zb2xlLmxvZyhgUHJvZ3Jlc3MgdXBkYXRlIGZvciBzZXNzaW9uICR7c2Vzc2lvbklkfTpgLCBtZXNzYWdlKTtcblxuICAgIC8vIEltcGxlbWVudGF0aW9uIHdpbGwgcXVlcnkgRHluYW1vREIgZm9yIGNvbm5lY3Rpb25zIHdpdGggdGhpcyBzZXNzaW9uSWRcbiAgICAvLyBhbmQgc2VuZCB0aGUgbWVzc2FnZSB0byBlYWNoIGNvbm5lY3Rpb24gdmlhIEFQSSBHYXRld2F5IE1hbmFnZW1lbnQgQVBJXG59XG4iXX0=